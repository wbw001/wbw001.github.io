import{r as t,A as g,j as r,p as d,b as j}from"./index-CzutaARU.js";import{u as _}from"./useQuery-CHmvCLgv.js";const q=({data:e})=>{const[i,s]=t.useState(0),n=t.useCallback(async(l,c)=>{if(l){const o=await g.SwaggerApi.post_img_like({uuid:l});g.isSuccess(o)&&s((c||0)+1)}},[]);return t.useEffect(()=>{s(0)},[e==null?void 0:e.uuid]),r.jsxs("div",{className:" w-full h-full bg-[#474747] relative",children:[r.jsx("img",{src:e.original_image_path,alt:""}),r.jsxs("div",{onClick:()=>{n(e==null?void 0:e.uuid,e==null?void 0:e.likes)},className:" absolute bottom-1 right-2 flex items-center justify-end",children:[r.jsx("img",{className:"!w-[12px]",src:"/images/like.png",alt:""}),r.jsx("span",{className:" ml-2 text-[12px]",children:i||(e==null?void 0:e.likes)})]})]})},u=d({my_styles:[],styles:[],select_style:null}),A=()=>j(u),F=()=>{const[e,i]=t.useState(1),{data:s,isPending:n,refetch:l}=_({queryKey:["get_styles",e],queryFn:()=>g.SwaggerApi.get_styles({page:e,page_size:20})});return console.log(s,"get_styles"),t.useEffect(()=>{if(s!=null&&s.data){const c=s.data;c.page===1?u.styles=s.data.styles||[]:u.styles=(u.styles||[]).concat(c.styles)}},[s==null?void 0:s.data]),{data:s,isPending:n,refetch:l,setPage:i}},v=e=>{const[i,s]=t.useState(1),[n,l]=t.useState(!1),[c,o]=t.useState([]),[m,f]=t.useState(),{data:a,isPending:p,refetch:S,isRefetching:h}=_({queryKey:["get_style_imgs",i,e],queryFn:()=>g.SwaggerApi.get_style_imgs(e||"",{page:i,page_size:20}),enabled:!!e});t.useEffect(()=>{if(a!=null&&a.data){const y=a.data;f(y.style),y.page===1?o(a.data.style_images||[]):o(b=>(b||[]).concat(a.data.style_images||[])),a.data.style_images.length<a.data.page_size?l(!0):l(!1)}},[a==null?void 0:a.data]);const x=t.useCallback(()=>{o([]),s(1),f(void 0),l(!1)},[]);t.useEffect(()=>{e||(o([]),s(1),f(void 0),l(!1))},[e]);const k=t.useCallback(()=>{s(y=>y+1)},[]);return{data:c,detail:m,isPending:p,refetch:S,isRefetching:h,setPage:s,loadMore:k,resetData:x,load_end:n}},C=e=>{const{data:i,isPending:s,refetch:n,isRefetching:l}=_({queryKey:["get_style_detail",e],queryFn:()=>g.SwaggerApi.get_style_detail({uuid:e||""}),enabled:!!e});return{detail:i,isPending:s,refetch:n,isRefetching:l}};export{q as S,A as a,v as b,C as c,u as s,F as u};
