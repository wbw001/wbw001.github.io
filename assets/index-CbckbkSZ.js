import{r as x,j as s,T as c,i as B,k as I,A as R,J as S,B as C}from"./index-CzutaARU.js";import{u as A,a as E,b as M,c as P}from"./hooks-BK12KGJ1.js";import{T as $,a as w}from"./index-BOpibxUc.js";import"./useQuery-CHmvCLgv.js";const T=30,W=({tasks:n,parent_width:i,cycle_rewards:e})=>{const t=x.useRef(null),a=x.useMemo(()=>(n==null?void 0:n.progress)||0,[n==null?void 0:n.progress]),l=x.useMemo(()=>{var g,v,k;if(a===0||!n)return{progress:a,left:0,right:0,start:0,end:0,is_complete:!1};if(a>=((e==null?void 0:e[e.length-1].condition)||0))return{left:0,right:0,start:0,end:0,is_complete:!0};let o=0;for(let u=0;u<(e==null?void 0:e.length);u++){const _=e==null?void 0:e[u];if(_.condition>a){o=-1;break}if(u===e.length-1){o=u;break}if(_.condition<=a&&((g=e[u+1])==null?void 0:g.condition)>a){o=u;break}}console.log(o,"==current_index");const r=o===-1?0:((v=e==null?void 0:e[o])==null?void 0:v.condition)||0,j=(a||0)-r;return{left:o+1,right:j,start:r,end:((k=e==null?void 0:e[o+1])==null?void 0:k.condition)||0,is_complete:!1}},[a,n,e]),[m,d]=x.useState(0);x.useEffect(()=>{var o;if(t.current){const r=((o=t.current.parentElement)==null?void 0:o.scrollWidth)||0;t.current.style.width=`${r}px`,d(r)}},[]);const h=x.useMemo(()=>(i-T*2)/((e==null?void 0:e.length)||-1),[i,e==null?void 0:e.length]),f=x.useMemo(()=>{if(l.is_complete)return 100;if(l.progress===0)return 0;const o=T,r=30,j=Math.max(30,h),g=l.left===0?0:o+(l.left-1)*j+(l.left-.5)*r,v=l.right===0?0:l.right/(l.end-l.start)*j+(l.left===0?0:r/2);return(g+v)/m*100},[h,l,m]);return s.jsx("progress",{className:"progress w-full mt-[9px] bg-[#474747] absolute left-0 top-[2px]",value:f,max:"100",ref:t})},N=({tasks:n,renderLabel:i,cycle_rewards:e})=>{const t=x.useRef(null),[a,l]=x.useState(0);return x.useEffect(()=>{var m;if(t.current){const d=((m=t.current.parentElement)==null?void 0:m.clientWidth)||0;l(d)}},[]),s.jsxs("div",{className:" absolute top-0 w-full flex justify-between items-center tips1 overflow-x-auto",ref:t,children:[s.jsx(W,{tasks:n,parent_width:a,cycle_rewards:e}),e==null?void 0:e.map((m,d)=>s.jsxs("div",{className:"flex flex-col items-center justify-start ml-[30px]  sticky left-0 right-0 z-10",style:{marginRight:d===((e==null?void 0:e.length)||1)-1?"32px":""},children:[s.jsxs("div",{className:"bg-base-300 rounded-full  text-[10px] w-[30px] h-[30px] leading-[30px] text-center relative z-10",children:["+",m.reward]}),s.jsx("div",{className:" mt-1 text-[9px] bg-[#1c1919]",children:i==null?void 0:i(m)})]},m.condition))]})},L=()=>{const n={1:10,2:30,3:10,4:10,5:10,6:20,7:30,0:30,29:120,30:200},i=[];for(let t=1;t<=30;t++){if(t===30||t===29){i.push({condition:t,reward:n[t]});continue}const a=t%7;i.push({condition:t,reward:n[a]})}console.log(i,"==res");const e=i.reduce((t,a)=>t+a.reward,0);return console.log(e),i},z=()=>{const n=[30,200,500,1e3],i=[1,3,5,10],e=[];for(let t=0;t<i.length;t++){const a=i[t],l=n[t];e.push({condition:a,reward:l})}return e},D=()=>{const n=[],i=[20,100,200,500],e=[1,5,10,20];for(let t=0;t<e.length;t++){const a=e[t],l=i[t];n.push({condition:a,reward:l})}return n},J=()=>{const n=[],i=[10,30,50,100,50,50,100,50,50,100],e=[1,5,10,25,50,100,150,200,250,300];for(let t=0;t<e.length;t++){const a=e[t],l=i[t];n.push({condition:a,reward:l})}return n},p={[c.Be_like_Task]:J(),[c.Create_avator_Task]:D(),[c.Invite_Task]:z(),[c.Registration_Task]:[],[c.Sign_In_Task]:L()},b={[c.Be_like_Task]:p[c.Be_like_Task].reduce((n,i)=>n+i.reward,0),[c.Create_avator_Task]:p[c.Create_avator_Task].reduce((n,i)=>n+i.reward,0),[c.Invite_Task]:p[c.Invite_Task].reduce((n,i)=>n+i.reward,0),[c.Registration_Task]:0,[c.Sign_In_Task]:p[c.Sign_In_Task].reduce((n,i)=>n+i.reward,0)},y=({loading:n,refetch:i})=>{var h,f,o;const{shareFriendsHandle:e}=B(),{tasks:t,nodes:a}=A(),l=I();console.log(l);const m=x.useCallback(async()=>{await R.SwaggerApi.post_daily_sign(),await(i==null?void 0:i()),S("Claim successfully")},[i]),d=x.useMemo(()=>{var r;return a?{total:(r=a.nums[a.nums.length-1])==null?void 0:r.condition,current:a.nodes_completed,round:a.round}:{total:9,current:6,round:0}},[a]);return console.log(d),n?s.jsx("div",{className:" mt-6 flex justify-center items-center",children:s.jsx("span",{className:"loading loading-dots loading-sm"})}):(console.log(p),s.jsxs("div",{children:[s.jsxs("button",{onClick:e,className:"btn btn-primary w-full h-[37px]",children:[s.jsx("img",{className:" w-6",src:"/images/bx_share.png",alt:""}),s.jsx("span",{className:" text-[17px] text-pingfang font-semibold",children:"Share friends"})]}),s.jsx("div",{children:s.jsxs("div",{className:" flex justify-center items-center mt-5",children:[s.jsx("span",{className:" mr-[6px]",children:"Extra rewards: "}),s.jsx("span",{children:"5"}),s.jsx("img",{className:" w-[17px] mx-1",src:"/images/metis.png",alt:""}),s.jsx("span",{children:"Metis"})]})}),s.jsxs("div",{className:" relative mt-3",children:[s.jsxs("div",{className:" text-[14px] text-[#FFFFFF99]",children:["Rewards Progress Round ",d.round]}),s.jsx("progress",{className:"progress w-11/12 mt-2",value:d.current,max:d.total}),s.jsxs("div",{className:" absolute top-[6px] w-full flex justify-between items-center",children:[s.jsxs("div",{className:"mt-4 text-[#FFFFFF99]",children:[d.current,"/",d.total]}),s.jsxs("div",{className:"flex flex-col items-center justify-start ml-[40%]",children:[s.jsx("div",{className:"bg-base-300 rounded-full p-2",children:s.jsx("img",{className:" w-[19px]",src:"/images/metis.png",alt:""})}),s.jsx("div",{className:" mt-1  text-sm font-semibold",children:"Rewards"})]}),s.jsxs("div",{className:" flex flex-col items-end justify-start",children:[s.jsx("div",{className:"bg-base-300 rounded-full p-2",children:s.jsx("img",{className:" w-[39px]",src:"/images/metis.png",alt:""})}),s.jsx("div",{className:" mt-1 text-sm font-semibold",children:"Large reward"})]})]})]}),s.jsxs("div",{className:" mt-20",children:[s.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] ",children:[s.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[s.jsx("div",{children:((h=t.Sign_In_Task)==null?void 0:h.description)||"Daily Attendance"}),s.jsxs("div",{className:" flex justify-center items-center mt-1",children:[s.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),s.jsxs("div",{className:" text-[18px] font-semibold",children:["+",b[c.Sign_In_Task]||0]})]})]}),s.jsx("div",{className:"pl-[10px] pr-[14px] mt-1 ",children:s.jsx("button",{onClick:m,className:"btn btn-primary w-full h-[37px] ",children:s.jsx("span",{className:" text-[17px]  font-bold",children:"Claim Now"})})}),s.jsxs("div",{className:" relative mt-3 ml-[5px] mr-[11px]",children:[s.jsx("div",{className:"h-[64px] mt-[9px]"}),s.jsx(N,{tasks:t.Sign_In_Task,cycle_rewards:p[c.Sign_In_Task],renderLabel:r=>`Day ${r.condition}`})]})]}),s.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px]  mt-[19px]",children:[s.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[s.jsxs("div",{children:[((f=t.Invite_Task)==null?void 0:f.progress)||0," Friends"]}),s.jsxs("div",{className:" flex justify-center items-center mt-1",children:[s.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),s.jsxs("div",{className:" text-[18px] font-semibold",children:["+",b[c.Invite_Task]||0]})]})]}),s.jsx("div",{className:"pl-[10px] pr-[14px] mt-1 ",children:s.jsx("button",{onClick:e,className:"btn btn-primary w-full h-[37px] ",children:s.jsx("span",{className:" text-[17px]  font-bold",children:"Invite friends"})})}),s.jsxs("div",{className:" relative mt-3 ml-[5px] mr-[11px]",children:[s.jsx("div",{className:"h-[64px] mt-[9px]"}),s.jsx(N,{tasks:t.Invite_Task,cycle_rewards:p[c.Invite_Task],renderLabel:r=>`${r.condition} ${r.condition===1?"friend":"friends"}`})]})]}),s.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] mt-[19px]",children:[s.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[s.jsx("div",{children:"Create my avator"}),s.jsxs("div",{className:" flex justify-center items-center mt-1",children:[s.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),s.jsxs("div",{className:" text-[18px] font-semibold",children:["+",b[c.Create_avator_Task]||0]})]})]}),s.jsxs("div",{className:" relative mt-2 ml-[5px] mr-[11px]",children:[s.jsx("div",{className:"h-[64px] mt-[9px]"}),s.jsx(N,{tasks:t.Create_avator_Task,cycle_rewards:p[c.Create_avator_Task],renderLabel:r=>`${r.condition} ${r.condition===1?"time":"times"}`})]})]}),s.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] mt-[19px]",children:[s.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[s.jsx("div",{children:"I'm be like"}),s.jsxs("div",{className:" flex justify-center items-center mt-1",children:[s.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),s.jsxs("div",{className:" text-[18px] font-semibold",children:["+",b[c.Be_like_Task]||0]})]})]}),s.jsxs("div",{className:" relative mt-2 ml-[5px] mr-[11px]",children:[s.jsx("div",{className:"h-[64px] mt-[9px]"}),s.jsx(N,{tasks:t.Be_like_Task,cycle_rewards:p[c.Be_like_Task],renderLabel:r=>`${r.condition} ${r.condition===1?"time":"times"}`})]})]})]}),s.jsxs("div",{className:" mt-6 flex justify-between items-center pl-2 pr-3",children:[s.jsxs("div",{className:"flex justify-center items-center",children:[s.jsx("span",{children:"Account Connection"}),s.jsx("img",{className:" ml-2 -mt-1",src:"/images/check-ok.png",alt:""})]}),s.jsxs("div",{className:" flex justify-center items-center",children:[s.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),s.jsxs("div",{className:" text-[18px] font-semibold",children:["+",((o=l==null?void 0:l.user_info)==null?void 0:o.initial_points)||0]})]})]})]}))},F=({rank:n})=>n<=3?s.jsx("img",{className:" w-[13px]",src:`/images/n${n}.png`,alt:""}):s.jsx("div",{className:" w-[18px] h-[18px] bg-[#616161] rounded-full leading-[18px] text-center text-[12px]",children:n}),H=()=>{var i,e,t;const n=E();return s.jsxs("div",{children:[s.jsxs("div",{className:"border border-[#6B6B6B] bg-[#ffffff]  rounded-[9px] px-2 pt-2 pb-1",children:[s.jsx("div",{className:" text-[#000000] text-sm font-semibold",children:"Find OG in community"}),s.jsx("button",{className:"btn btn-outline w-full h-[37px] bg-black mt-3",children:s.jsx("span",{className:" text-[17px]  font-bold",children:"Join"})})]}),s.jsx("div",{className:" mt-8 px-6",children:s.jsxs("ul",{className:" font-semibold text-[14px]",children:[s.jsxs("li",{className:" flex text-[#FFFFFF99]",children:[s.jsx("div",{className:" w-[52px] ml-5",children:"Ranking"}),s.jsx("div",{className:" w-[104px] ml-5",children:"Name"}),s.jsx("div",{className:" w-[104px]",children:"Point"})]}),s.jsxs("li",{className:" flex h-[37px] mt-4 bg-[#393939] leading-[37px] rounded-[6px]",children:[s.jsx("div",{className:" w-[52px] pl-[6px] ml-5 flex items-center",children:s.jsx(F,{rank:((i=n.my_rank)==null?void 0:i.rank)||0})}),s.jsx("div",{className:" w-[104px] ml-5",children:"Me"}),s.jsx("div",{className:" w-[104px]",children:s.jsxs("div",{className:" flex justify-start items-center",children:[s.jsx("img",{className:"w-[20px]",src:"/images/point.png",alt:""}),s.jsx("div",{className:" text-[14px] font-semibold",children:(e=n.my_rank)==null?void 0:e.points})]})})]}),(t=n.rank)==null?void 0:t.map(a=>s.jsxs("li",{className:" flex h-[37px] mt-2 leading-[37px] rounded-[6px]",children:[s.jsx("div",{className:" w-[52px] pl-[6px] ml-5 flex items-center",children:s.jsx(F,{rank:a.rank})}),s.jsx("div",{className:" w-[104px] ml-5 text-ellipsis overflow-hidden pr-2",children:a.username||"--"}),s.jsx("div",{className:" w-[104px]",children:s.jsxs("div",{className:" flex justify-start items-center",children:[s.jsx("img",{className:"w-[20px]",src:"/images/point.png",alt:""}),s.jsx("div",{className:" text-[14px] font-semibold",children:a.points})]})})]}))]})})]})};function V(){var l;const[n,i]=x.useState(0),{data:e,isPending:t,refetch:a}=M();return P(),s.jsxs("div",{className:"h-full overflow-auto",children:[s.jsxs("div",{className:" flex flex-col justify-start items-center mt-4",children:[s.jsx("div",{className:"tips",children:"LazAI Royaty Point in PicWiz"}),s.jsxs("div",{className:" flex justify-center items-center mt-1",children:[s.jsx("img",{className:"w-[30px]",src:"/images/point.png",alt:""}),s.jsx("div",{className:" text-[28px] font-semibold",children:s.jsx(C,{value:((l=e==null?void 0:e.data)==null?void 0:l.user_points)||0,decimals:0})})]}),s.jsx("button",{className:"btn btn-outline",children:s.jsx("span",{className:" text-base",children:"View Total Achieved"})})]}),s.jsx("div",{className:" mt-4 bg-[#1c1919] sticky top-0 z-10 pb-2",children:s.jsxs($,{total:2,active:n,children:[s.jsx(w,{onClick:()=>{i(0)},children:"Progress"}),s.jsx(w,{onClick:()=>{i(1)},children:"Leader Board"})]})}),s.jsx("div",{className:"mt-5 px-3 pb-10",children:n===0?s.jsx(y,{refetch:a,loading:t}):s.jsx(H,{})})]})}export{V as default};
