import{r as d,j as e,k as _,A as y,J as F,B}from"./index-COmTOoUp.js";import{u as T,a as R,b as S,c as C}from"./hooks-BjjrafgG.js";import{T as I,a as v}from"./index-CPD7xCCP.js";import"./useQuery-Cq0Ynuqi.js";const b=30,E=({tasks:s,parent_width:c})=>{const n=d.useRef(null),i=d.useMemo(()=>(s==null?void 0:s.progress)||0,[s==null?void 0:s.progress]),t=d.useMemo(()=>{var h,u,g;if(i===0||!s)return{progress:i,left:0,right:0,start:0,end:0,is_complete:!1};if(i>=((s==null?void 0:s.cycle_rewards[s.cycle_rewards.length-1].condition)||0))return{left:0,right:0,start:0,end:0,is_complete:!0};let a=0;for(let o=0;o<(s==null?void 0:s.cycle_rewards.length);o++){const N=s==null?void 0:s.cycle_rewards[o];if(N.condition>i){a=-1;break}if(o===s.cycle_rewards.length-1){a=o;break}if(N.condition<=i&&((h=s.cycle_rewards[o+1])==null?void 0:h.condition)>i){a=o;break}}console.log(a,"==current_index");const l=a===-1?0:((u=s==null?void 0:s.cycle_rewards[a])==null?void 0:u.condition)||0,p=(i||0)-l;return{left:a+1,right:p,start:l,end:((g=s==null?void 0:s.cycle_rewards[a+1])==null?void 0:g.condition)||0,is_complete:!1}},[s,i]),[r,m]=d.useState(0);d.useEffect(()=>{var a;if(n.current){const l=((a=n.current.parentElement)==null?void 0:a.scrollWidth)||0;n.current.style.width=`${l}px`,m(l)}},[]);const x=d.useMemo(()=>(c-b*2)/((s==null?void 0:s.cycle_rewards.length)||-1),[c,s==null?void 0:s.cycle_rewards.length]),j=d.useMemo(()=>{if(t.is_complete)return 100;if(t.progress===0)return 0;const a=b,l=30,p=Math.max(30,x),h=t.left===0?0:a+(t.left-1)*p+(t.left-.5)*l,u=t.right===0?0:t.right/(t.end-t.start)*p+(t.left===0?0:l/2);return(h+u)/r*100},[x,t,r]);return e.jsx("progress",{className:"progress w-full mt-[9px] bg-[#474747] absolute left-0 top-[2px]",value:j,max:"100",ref:n})},f=({tasks:s,renderLabel:c})=>{const n=d.useRef(null),[i,t]=d.useState(0);return d.useEffect(()=>{var r;if(n.current){const m=((r=n.current.parentElement)==null?void 0:r.clientWidth)||0;t(m)}},[]),e.jsxs("div",{className:" absolute top-0 w-full flex justify-between items-center tips1 overflow-x-auto",ref:n,children:[e.jsx(E,{tasks:s,parent_width:i}),s==null?void 0:s.cycle_rewards.map((r,m)=>e.jsxs("div",{className:"flex flex-col items-center justify-start ml-[30px]  sticky left-0 right-0 z-10",style:{marginRight:m===((s==null?void 0:s.cycle_rewards.length)||1)-1?"32px":""},children:[e.jsxs("div",{className:"bg-base-300 rounded-full  text-[10px] w-[30px] h-[30px] leading-[30px] text-center relative z-10",children:["+",r.reward]}),e.jsx("div",{className:" mt-1 text-[9px] bg-[#1c1919]",children:c==null?void 0:c(r)})]},r.condition))]})},P=({loading:s,refetch:c})=>{var j,a;const{shareFriendsHandle:n}=_(),{tasks:i,nodes:t,task_total_reward:r}=T(),m=d.useCallback(async()=>{await y.SwaggerApi.post_daily_sign(),await(c==null?void 0:c()),F("Claim successfully")},[c]),x=d.useMemo(()=>{var l;return t?{total:(l=t.nums[t.nums.length-1])==null?void 0:l.condition,current:t.nodes_completed,round:t.round}:{total:9,current:6,round:0}},[t]);return console.log(x),s?e.jsx("div",{className:" mt-6 flex justify-center items-center",children:e.jsx("span",{className:"loading loading-dots loading-sm"})}):e.jsxs("div",{children:[e.jsxs("button",{onClick:n,className:"btn btn-primary w-full h-[37px]",children:[e.jsx("img",{className:" w-6",src:"/images/bx_share.png",alt:""}),e.jsx("span",{className:" text-[17px] text-pingfang font-semibold",children:"Share friends"})]}),e.jsx("div",{children:e.jsxs("div",{className:" flex justify-center items-center mt-5",children:[e.jsx("span",{className:" mr-[6px]",children:"Extra rewards: "}),e.jsx("span",{children:"5"}),e.jsx("img",{className:" w-[17px] mx-1",src:"/images/metis.png",alt:""}),e.jsx("span",{children:"Metis"})]})}),e.jsxs("div",{className:" relative mt-3",children:[e.jsxs("div",{className:" text-[14px] text-[#FFFFFF99]",children:["Rewards Progress Round ",x.round]}),e.jsx("progress",{className:"progress w-11/12 mt-2",value:x.current,max:x.total}),e.jsxs("div",{className:" absolute top-[6px] w-full flex justify-between items-center",children:[e.jsxs("div",{className:"mt-4 text-[#FFFFFF99]",children:[x.current,"/",x.total]}),e.jsxs("div",{className:"flex flex-col items-center justify-start ml-[40%]",children:[e.jsx("div",{className:"bg-base-300 rounded-full p-2",children:e.jsx("img",{className:" w-[19px]",src:"/images/metis.png",alt:""})}),e.jsx("div",{className:" mt-1  text-sm font-semibold",children:"Rewards"})]}),e.jsxs("div",{className:" flex flex-col items-end justify-start",children:[e.jsx("div",{className:"bg-base-300 rounded-full p-2",children:e.jsx("img",{className:" w-[39px]",src:"/images/metis.png",alt:""})}),e.jsx("div",{className:" mt-1 text-sm font-semibold",children:"Large reward"})]})]})]}),e.jsxs("div",{className:" mt-20",children:[e.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] ",children:[e.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[e.jsx("div",{children:((j=i.Sign_In_Task)==null?void 0:j.description)||"Daily Attendance"}),e.jsxs("div",{className:" flex justify-center items-center mt-1",children:[e.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),e.jsxs("div",{className:" text-[18px] font-semibold",children:["+",r.Sign_In_Task||0]})]})]}),e.jsx("div",{className:"pl-[10px] pr-[14px] mt-1 ",children:e.jsx("button",{onClick:m,className:"btn btn-primary w-full h-[37px] ",children:e.jsx("span",{className:" text-[17px]  font-bold",children:"Claim Now"})})}),e.jsxs("div",{className:" relative mt-3 ml-[5px] mr-[11px]",children:[e.jsx("div",{className:"h-[64px] mt-[9px]"}),e.jsx(f,{tasks:i.Sign_In_Task,renderLabel:l=>`Day ${l.condition}`})]})]}),e.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px]  mt-[19px]",children:[e.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[e.jsxs("div",{children:[((a=i.Invite_Task)==null?void 0:a.progress)||0," Friends"]}),e.jsxs("div",{className:" flex justify-center items-center mt-1",children:[e.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),e.jsxs("div",{className:" text-[18px] font-semibold",children:["+",r.Invite_Task||0]})]})]}),e.jsx("div",{className:"pl-[10px] pr-[14px] mt-1 ",children:e.jsx("button",{onClick:n,className:"btn btn-primary w-full h-[37px] ",children:e.jsx("span",{className:" text-[17px]  font-bold",children:"Invite friends"})})}),e.jsxs("div",{className:" relative mt-3 ml-[5px] mr-[11px]",children:[e.jsx("div",{className:"h-[64px] mt-[9px]"}),e.jsx(f,{tasks:i.Invite_Task,renderLabel:l=>`${l.condition} ${l.condition===1?"friend":"friends"}`})]})]}),e.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] mt-[19px]",children:[e.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[e.jsx("div",{children:"Create my avator"}),e.jsxs("div",{className:" flex justify-center items-center mt-1",children:[e.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),e.jsxs("div",{className:" text-[18px] font-semibold",children:["+",r.Create_avator_Task||0]})]})]}),e.jsxs("div",{className:" relative mt-2 ml-[5px] mr-[11px]",children:[e.jsx("div",{className:"h-[64px] mt-[9px]"}),e.jsx(f,{tasks:i.Create_avator_Task,renderLabel:l=>`${l.condition} ${l.condition===1?"time":"times"}`})]})]}),e.jsxs("div",{className:"border border-[#6B6B6B] rounded-[9px] mt-[19px]",children:[e.jsxs("div",{className:"flex justify-between items-center  p-[10px] pr-[14px]",children:[e.jsx("div",{children:"I'm be like"}),e.jsxs("div",{className:" flex justify-center items-center mt-1",children:[e.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),e.jsxs("div",{className:" text-[18px] font-semibold",children:["+",r.Be_like_Task||0]})]})]}),e.jsxs("div",{className:" relative mt-2 ml-[5px] mr-[11px]",children:[e.jsx("div",{className:"h-[64px] mt-[9px]"}),e.jsx(f,{tasks:i.Be_like_Task,renderLabel:l=>`${l.condition} ${l.condition===1?"time":"times"}`})]})]})]}),e.jsxs("div",{className:" mt-6 flex justify-between items-center pl-2 pr-3",children:[e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("span",{children:"Account Connection"}),e.jsx("img",{className:" ml-2 -mt-1",src:"/images/check-ok.png",alt:""})]}),e.jsxs("div",{className:" flex justify-center items-center",children:[e.jsx("img",{className:"w-[32px]",src:"/images/point.png",alt:""}),e.jsxs("div",{className:" text-[18px] font-semibold",children:["+",r.Registration_Task||0]})]})]})]})},w=({rank:s})=>s<=3?e.jsx("img",{className:" w-[13px]",src:`/images/n${s}.png`,alt:""}):e.jsx("div",{className:" w-[18px] h-[18px] bg-[#616161] rounded-full leading-[18px] text-center text-[12px]",children:s}),$=()=>{var c,n,i;const s=R();return e.jsxs("div",{children:[e.jsxs("div",{className:"border border-[#6B6B6B] bg-[#ffffff]  rounded-[9px] px-2 pt-2 pb-1",children:[e.jsx("div",{className:" text-[#000000] text-sm font-semibold",children:"Find OG in community"}),e.jsx("button",{className:"btn btn-outline w-full h-[37px] bg-black mt-3",children:e.jsx("span",{className:" text-[17px]  font-bold",children:"Join"})})]}),e.jsx("div",{className:" mt-8 px-6",children:e.jsxs("ul",{className:" font-semibold text-[14px]",children:[e.jsxs("li",{className:" flex text-[#FFFFFF99]",children:[e.jsx("div",{className:" w-[52px] ml-5",children:"Ranking"}),e.jsx("div",{className:" w-[104px] ml-5",children:"Name"}),e.jsx("div",{className:" w-[104px]",children:"Point"})]}),e.jsxs("li",{className:" flex h-[37px] mt-4 bg-[#393939] leading-[37px] rounded-[6px]",children:[e.jsx("div",{className:" w-[52px] pl-[6px] ml-5 flex items-center",children:e.jsx(w,{rank:((c=s.my_rank)==null?void 0:c.rank)||0})}),e.jsx("div",{className:" w-[104px] ml-5",children:"Me"}),e.jsx("div",{className:" w-[104px]",children:e.jsxs("div",{className:" flex justify-start items-center",children:[e.jsx("img",{className:"w-[20px]",src:"/images/point.png",alt:""}),e.jsx("div",{className:" text-[14px] font-semibold",children:(n=s.my_rank)==null?void 0:n.points})]})})]}),(i=s.rank)==null?void 0:i.map(t=>e.jsxs("li",{className:" flex h-[37px] mt-2 leading-[37px] rounded-[6px]",children:[e.jsx("div",{className:" w-[52px] pl-[6px] ml-5 flex items-center",children:e.jsx(w,{rank:t.rank})}),e.jsx("div",{className:" w-[104px] ml-5 text-ellipsis overflow-hidden pr-2",children:t.username||"--"}),e.jsx("div",{className:" w-[104px]",children:e.jsxs("div",{className:" flex justify-start items-center",children:[e.jsx("img",{className:"w-[20px]",src:"/images/point.png",alt:""}),e.jsx("div",{className:" text-[14px] font-semibold",children:t.points})]})})]}))]})})]})};function z(){var r;const[s,c]=d.useState(0),{data:n,isPending:i,refetch:t}=S();return C(),e.jsxs("div",{className:"h-full overflow-auto",children:[e.jsxs("div",{className:" flex flex-col justify-start items-center mt-4",children:[e.jsx("div",{className:"tips",children:"LazAI Royaty Point in PicWiz"}),e.jsxs("div",{className:" flex justify-center items-center mt-1",children:[e.jsx("img",{className:"w-[30px]",src:"/images/point.png",alt:""}),e.jsx("div",{className:" text-[28px] font-semibold",children:e.jsx(B,{value:((r=n==null?void 0:n.data)==null?void 0:r.user_points)||0,decimals:0})})]}),e.jsx("button",{className:"btn btn-outline",children:e.jsx("span",{className:" text-base",children:"View Total Achieved"})})]}),e.jsx("div",{className:" mt-4 bg-[#1c1919] sticky top-0 z-10 pb-2",children:e.jsxs(I,{total:2,active:s,children:[e.jsx(v,{onClick:()=>{c(0)},children:"Progress"}),e.jsx(v,{onClick:()=>{c(1)},children:"Leader Board"})]})}),e.jsx("div",{className:"mt-5 px-3 pb-10",children:s===0?e.jsx(P,{refetch:t,loading:i}):e.jsx($,{})})]})}export{z as default};
