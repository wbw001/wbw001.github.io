import{r as t,A as y,j as g,p as d,i as j,k as _}from"./index-CQybuzrS.js";const A=({data:e})=>{const[i,s]=t.useState(0),c=t.useCallback(async(l,n)=>{if(l){const r=await y.SwaggerApi.post_img_like({uuid:l});y.isSuccess(r)&&s((n||0)+1)}},[]);return t.useEffect(()=>{s(0)},[e==null?void 0:e.uuid]),g.jsxs("div",{className:" w-full h-full bg-[#474747] relative",children:[g.jsx("img",{src:e.original_image_path,alt:""}),g.jsxs("div",{onClick:()=>{c(e==null?void 0:e.uuid,e==null?void 0:e.likes)},className:" absolute bottom-1 right-2 flex items-center justify-end",children:[g.jsx("img",{className:"!w-[12px]",src:"/images/like.png",alt:""}),g.jsx("span",{className:" ml-2 text-[12px]",children:i||(e==null?void 0:e.likes)})]})]})},o=d({my_styles:[],styles:[],select_style:null}),E=()=>j(o),q=()=>{const[e,i]=t.useState(1),{data:s,isPending:c,refetch:l}=_({queryKey:["get_styles",e],queryFn:()=>y.SwaggerApi.get_styles({page:e,page_size:20})});return t.useEffect(()=>{if(s!=null&&s.data){const n=s.data;n.page===1?o.styles=s.data.styles||[]:o.styles=(o.styles||[]).concat(n.styles)}},[s==null?void 0:s.data]),{data:s,isPending:c,refetch:l,setPage:i}},v=e=>{const[i,s]=t.useState(1),[c,l]=t.useState(!1),[n,r]=t.useState([]),[p,f]=t.useState(),{data:a,isPending:m,refetch:S,isRefetching:h}=_({queryKey:["get_style_imgs",i,e],queryFn:()=>y.SwaggerApi.get_style_imgs(e||"",{page:i,page_size:20}),enabled:!!e});t.useEffect(()=>{if(a!=null&&a.data){const u=a.data;f(u.style),u.page===1?r(a.data.style_images||[]):r(b=>(b||[]).concat(a.data.style_images||[])),a.data.style_images.length<a.data.page_size?l(!0):l(!1)}},[a==null?void 0:a.data]);const x=t.useCallback(()=>{r([]),s(1),f(void 0),l(!1)},[]);t.useEffect(()=>{e||(r([]),s(1),f(void 0),l(!1))},[e]);const k=t.useCallback(()=>{s(u=>u+1)},[]);return{data:n,detail:p,isPending:m,refetch:S,isRefetching:h,setPage:s,loadMore:k,resetData:x,load_end:c}},F=e=>{const{data:i,isPending:s,refetch:c,isRefetching:l}=_({queryKey:["get_style_detail",e],queryFn:()=>y.SwaggerApi.get_style_detail({uuid:e||""}),enabled:!!e});return{detail:i,isPending:s,refetch:c,isRefetching:l}},C=e=>{o.select_style=e||null};export{A as S,q as a,v as b,F as c,C as s,E as u};
